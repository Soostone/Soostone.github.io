<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="manifest" href="/manifest.json" /> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/main.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="apple-touch-icon" sizes="76x76" href="/assets/images/touch-icon/logo-76.png" /> <link rel="apple-touch-icon" sizes="120x120" href="/assets/images/touch-icon/logo-120.png" /> <link rel="apple-touch-icon" sizes="152x152" href="/assets/images/touch-icon/logo-152.png" /> <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/touch-icon/logo-180.png" /> <meta name="msapplication-square70x70logo" content="/assets/images/touch-icon/logo-70.png" /> <meta name="msapplication-square150x150logo" content="/assets/images/touch-icon/logo-150.png" /> <meta name="msapplication-square310x310logo" content="/assets/images/touch-icon/logo-310.png" /> <!-- keywords not used by google but other search engines might still use --> <meta name="keywords" content="Napkin, BigQuery, Postgres, SQL, BigData, Data Scientist, Data Engineer, Analytics" /> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Fundamentas | docs</title> <meta name="generator" content="Jekyll v4.2.1" /> <meta property="og:title" content="Fundamentas" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Tutorial a new Napkin user with examples showing all features and usecases." /> <meta property="og:description" content="Tutorial a new Napkin user with examples showing all features and usecases." /> <link rel="canonical" href="https://soostone.github.io/Funamentals/" /> <meta property="og:url" content="https://soostone.github.io/Funamentals/" /> <meta property="og:site_name" content="docs" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Fundamentas" /> <script type="application/ld+json"> {"url":"https://soostone.github.io/Funamentals/","@type":"WebPage","description":"Tutorial a new Napkin user with examples showing all features and usecases.","headline":"Fundamentas","dateModified":"2021-08-25T11:50:00+00:00","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://soostone.github.io/assets/images/logo-and-name.svg"}},"@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewbox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewbox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewbox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewbox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewbox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="site-super-header"> <div class="ssh-container"> <div class="super-nav-box"> <div class="site-logo"></div> <div class="site-nav"> <a class="link-button active" href="#">Documentation</a> <a class="link-button" href="#">Community</a> <a class="link-button" href="#">Features</a> <a class="link-button" href="#">Use Cases</a> <span class="gradient-border"> <a class="link-button " href="#">Install</a> </span> </div> </div> <div class="menu__button" style="-webkit-user-select: text;" aria-label="menu" role="button" tabindex="0" aria-controls="w-nav-overlay-0" aria-haspopup="menu" aria-expanded="false"> <div class="menu__button-block"> <div class="menu__button-line top"></div> <div class="menu__button-line mid"></div> <div class="menu__button-line bot"></div> </div> </div> </div> </div> <div class="side-bar" style="display: none;"> <div class="site-header"> <a href="https://soostone.github.io/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewbox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"> <li class="nav-list-item" style="display: none;"> <a class="nav-list-link" href="https://napkinweb.webflow.io/" target="_blank" rel="noopener noreferrer"> Napkin product </a> </li>
<li class="nav-list-item">
<a href="https://soostone.github.io/" class="nav-list-link"> About </a> <ul></ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/getting-started/" class="nav-list-link"> Getting Started </a> <ul><li> <a href="/getting-started/#key-features" class="nav-list-link"> Hello world </a> </li></ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/install/" class="nav-list-link"> Installation </a> <ul>
<li> <a href="/install/#installation" class="nav-list-link"> Native binary </a> </li>
<li> <a href="/install/#docker" class="nav-list-link"> Docker </a> </li>
<li> <a href="/install/#cachix" class="nav-list-link"> Cachix </a> </li>
</ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/Funamentals/" class="nav-list-link"> Fundamentas </a> <ul></ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/tutorial/" class="nav-list-link"> Tutorial </a> <ul></ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/tips-and-tricks/" class="nav-list-link"> Tips and Tricks </a> <ul></ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/docker/" class="nav-list-link"> Docker </a> <ul>
<li> <a href="/docker/#basic-usage" class="nav-list-link"> Basic usage </a> </li>
<li> <a href="/docker/#advanced-usage" class="nav-list-link"> Advanced usage </a> </li>
<li> <a href="/docker/#technical-details" class="nav-list-link"> Technical details </a> </li>
</ul>
</li>
<li class="nav-list-item">
<a href="#" class="nav-list-expander"> <svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="https://soostone.github.io/user-manual/" class="nav-list-link"> User Manual </a> <ul></ul>
<ul class="nav-list ">
<li class="nav-list-item "><a href="https://soostone.github.io/user-manual/multi-environment" class="nav-list-link">Multi-environment pipelines in a team setting</a></li>
<li class="nav-list-item "><a href="https://soostone.github.io/user-manual/db-connection" class="nav-list-link">Connecting to the database</a></li>
<li class="nav-list-item "><a href="https://soostone.github.io/user-manual/devcontainer" class="nav-list-link">Devcontainer</a></li>
<li class="nav-list-item "><a href="https://soostone.github.io/user-manual/github-actions" class="nav-list-link">Running scheduled job on GitHub Actions</a></li>
</ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/changelog/" class="nav-list-link"> Changelog </a> <ul></ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/haddock/" class="nav-list-link"> Haddock </a> <ul></ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/cachix/versions/" class="nav-list-link"> Cachix versions </a> <ul></ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/ide" class="nav-list-link"> IDE Support </a> <ul>
<li> <a href="/ide#visual-studio-code" class="nav-list-link"> Visual Studio Code </a> </li>
<li> <a href="/ide#other-editors" class="nav-list-link"> Other Editors </a> </li>
</ul>
</li>
</ul> </nav> </div> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search docs" aria-label="Search docs" autocomplete="off"> <label for="search-input" class="search-label"><svg viewbox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main" id="top"> <div class="btn-sort-cats">Sort Categories <span><img src="/assets/images/down-arrow.svg" alt=""></span>
</div> <div class="side-bar"> <ul class="nav-list"> <li class="nav-list-item" style="display: none;"> <a class="nav-list-link" href="https://napkinweb.webflow.io/" target="_blank" rel="noopener noreferrer"> Napkin product </a> </li>
<li class="nav-list-item">
<a href="https://soostone.github.io/" class="nav-list-link"> About </a> <ul></ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/getting-started/" class="nav-list-link"> Getting Started </a> <ul><li> <a href="/getting-started/#key-features" class="nav-list-link"> Hello world </a> </li></ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/install/" class="nav-list-link"> Installation </a> <ul>
<li> <a href="/install/#installation" class="nav-list-link"> Native binary </a> </li>
<li> <a href="/install/#docker" class="nav-list-link"> Docker </a> </li>
<li> <a href="/install/#cachix" class="nav-list-link"> Cachix </a> </li>
</ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/Funamentals/" class="nav-list-link"> Fundamentas </a> <ul></ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/tutorial/" class="nav-list-link"> Tutorial </a> <ul></ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/tips-and-tricks/" class="nav-list-link"> Tips and Tricks </a> <ul></ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/docker/" class="nav-list-link"> Docker </a> <ul>
<li> <a href="/docker/#basic-usage" class="nav-list-link"> Basic usage </a> </li>
<li> <a href="/docker/#advanced-usage" class="nav-list-link"> Advanced usage </a> </li>
<li> <a href="/docker/#technical-details" class="nav-list-link"> Technical details </a> </li>
</ul>
</li>
<li class="nav-list-item">
<a href="#" class="nav-list-expander"> <svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="https://soostone.github.io/user-manual/" class="nav-list-link"> User Manual </a> <ul></ul>
<ul class="nav-list ">
<li class="nav-list-item "><a href="https://soostone.github.io/user-manual/multi-environment" class="nav-list-link">Multi-environment pipelines in a team setting</a></li>
<li class="nav-list-item "><a href="https://soostone.github.io/user-manual/db-connection" class="nav-list-link">Connecting to the database</a></li>
<li class="nav-list-item "><a href="https://soostone.github.io/user-manual/devcontainer" class="nav-list-link">Devcontainer</a></li>
<li class="nav-list-item "><a href="https://soostone.github.io/user-manual/github-actions" class="nav-list-link">Running scheduled job on GitHub Actions</a></li>
</ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/changelog/" class="nav-list-link"> Changelog </a> <ul></ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/haddock/" class="nav-list-link"> Haddock </a> <ul></ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/cachix/versions/" class="nav-list-link"> Cachix versions </a> <ul></ul>
</li>
<li class="nav-list-item">
<a href="https://soostone.github.io/ide" class="nav-list-link"> IDE Support </a> <ul>
<li> <a href="/ide#visual-studio-code" class="nav-list-link"> Visual Studio Code </a> </li>
<li> <a href="/ide#other-editors" class="nav-list-link"> Other Editors </a> </li>
</ul>
</li>
</ul> </div> <div class="main-content-lspander"></div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 id="napkin-fundamentals"> <a href="#napkin-fundamentals" class="anchor-heading" aria-labelledby="napkin-fundamentals"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Napkin Fundamentals </h1> <p>This is the first of series of tutorials to get up and running with Napkin development. We do this through the example of building a simple Napkin data pipeline. The goal is that by the end of this tutorial, you’ll have a good idea of:</p> <ul> <li>How to start a Napkin project</li> <li>How to modify and verify and execute your Napkin project</li> <li>How Napkin helps you build a real-life application fast.</li> </ul> <p>With that, let’s get started!</p> <h2 id="prerequisites"> <a href="#prerequisites" class="anchor-heading" aria-labelledby="prerequisites"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prerequisites </h2> <p>Please make sure you have Napkin installed as per instruction from our <a href="#">Installing Napkin</a> page.</p> <p>You will also need some common software tools to build and interact with the Napkin project.</p> <ul> <li>
<a href="https://www.sqlite.org/download.html" target="_blank" rel="noopener noreferrer">SQLite</a> as our backend database loaded with Chinook data</li> <li>A terminal application for command line interaction.</li> </ul> <h2 id="running-napkin"> <a href="#running-napkin" class="anchor-heading" aria-labelledby="running-napkin"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running Napkin </h2> <p>We’ll start by getting the Napkin up and running, and then explain the different Napkin commands which we will later extend. At any point, you can ask Napkin for help by using Napkin CLI help command:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>napkin <span class="nt">--help</span>
</code></pre></div></div> <p>First, open a terminal, change to a folder in which to create your first project, and bootstrap your first Napkin project</p> <div class="language-sh copiable highlighter-rouge"><div class="highlight"><pre class="highlight"><code> napkin init <span class="nt">--project-name</span> chinook-analytic
</code></pre></div></div> <p>This creates a new folder with contents from our <code class="language-plaintext highlighter-rouge">:basic</code> template.</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>tree <span class="nb">.</span>
<span class="nb">.</span>
└── chinook-analytic
    ├── hie.yaml
    ├── README.md
    ├── specs
    │   └── spec.yaml
    └── sql
        └── example.sql
3 directories, 4 files
</code></pre></div></div> <p>Use :</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>napkin templates
</code></pre></div></div> <p class="copiable">To see a list of all available templates</p> <p>For additional information in using more advanced templates use Napkin’s comprehensive help command/sub-commnad:</p> <div class="language-sh copiable highlighter-rouge"><div class="highlight"><pre class="highlight"><code>napkin init <span class="nt">--help</span>
</code></pre></div></div> <h3 id="the-napkin-model"> <a href="#the-napkin-model" class="anchor-heading" aria-labelledby="the-napkin-model"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The Napkin Model </h3> <p>In your terminal, navigate to the root of the chinook-analytic project and run:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>napkin validate <span class="nt">--spec-file</span> ./specs/spec.yaml
</code></pre></div></div> <p>This should indicate our Napkin project, although empty, is syntaticaly valid.</p> <p>Napkin code defines the backend, and the workflow of our data-pipeline. Both concepts are described in the <code class="language-plaintext highlighter-rouge">specs/spec.yaml</code>:</p>
<pre><code class="language-YAML"># yaml-language-server: $schema=http://soostone-napkin-public.s3-website.us-east-1.amazonaws.com/schema/schema.json

# Connect to Sqlite database:
backend: Sqlite
db_url: sqlite:.chinook-sql.db

tables:
...
</code></pre>
<p>There are several importatnt aspects here</p> <ul> <li>Spec, a high level <a href="https://en.wikipedia.org/wiki/Domain-specific_language" target="_blank" rel="noopener noreferrer">DSL</a> in <a href="https://en.wikipedia.org/wiki/YAML" target="_blank" rel="noopener noreferrer">YAML configuration language</a> is the interface to Napkin</li> <li>The backend database and the corresponding connection URL</li> <li>a list napkin managed tables</li> </ul> <h3 id="setting-up-sqlite-chinook-database"> <a href="#setting-up-sqlite-chinook-database" class="anchor-heading" aria-labelledby="setting-up-sqlite-chinook-database"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up Sqlite Chinook database </h3> <p>1- Download Chinook database 2- Create a local instance of SQLite Chinook database</p> <div class="language-sh copiable highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-L</span> https://github.com/lerocha/chinook-database/raw/master/ChinookDatabase/DataSources/Chinook_Sqlite.sql | dos2unix <span class="o">&gt;</span> .chinook_sqlite.sql
<span class="nb">cat</span> <span class="nv">$SQLITE_DUMP</span> | sqlite3 .chinook-sql.db
</code></pre></div></div> <p>The script above installs a local copy of Chinook database :</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sqlite3 ./.chinook-sql.db
SQLite version 3.31.1 2020-01-27 19:55:54
Enter <span class="s2">".help"</span> <span class="k">for </span>usage hints.
sqlite&gt; .tables
Album          Employee       InvoiceLine    PlaylistTrack
Artist         Genre          MediaType      Track
Customer       Invoice        Playlist
sqlite&gt;
</code></pre></div></div> <h3 id="napkin-managed-tables"> <a href="#napkin-managed-tables" class="anchor-heading" aria-labelledby="napkin-managed-tables"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Napkin Managed tables </h3> <p>Lets create ranking of Chinook sales to countries. For instance we might want to know the top 10, or 20, countires with the most invoices.</p> <p>1- group invoices by country 2- get the top <code class="language-plaintext highlighter-rouge">n</code> performers</p> <h4 id="client_countries"> <a href="#client_countries" class="anchor-heading" aria-labelledby="client_countries"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Client_countries </h4> <p>To create our first Napkin managed table, we first create the <code class="language-plaintext highlighter-rouge">sql/client_countries.sql</code></p>
<pre><code class="language-SQL">-- client countries and total invoices
SELECT
    BillingCountry AS billingCountry,
    COUNT(*) AS Invoices
FROM
    Invoice
GROUP BY
    BillingCountry
ORDER BY
    Invoices DESC
</code></pre>
<p>We then modify the <code class="language-plaintext highlighter-rouge">specs/spec.yaml</code> to create the <code class="language-plaintext highlighter-rouge">client_countries</code> managed table</p>
<pre><code class="language-YAML"># yaml-language-server: $schema=http://soostone-napkin-public.s3-website.us-east-1.amazonaws.com/schema/schema.json

# Connect to Sqlite database:
backend: Sqlite
db_url: sqlite:.chinook-sql.db

tables:

## countries have the most Invoices
  client_countries:
    create_action:
      sql_file:
        source: client_countries.sql
</code></pre>
<p>Next we validate that our Spec is still valid:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>napkin validate <span class="nt">--spec-file</span> specs/spec.yaml
</code></pre></div></div> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>OK
</code></pre></div></div> <p>and finally we run our spec:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>napkin run <span class="nt">--spec-file</span> specs/spec.yaml
</code></pre></div></div> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>2021-12-24 09:47:58][Info] Determining tables <span class="k">for </span>update...
<span class="o">[</span>2021-12-24 09:47:58][Info] Unmanaged tables that will be used as an input <span class="k">in </span>this run:
- Invoice

<span class="o">[</span>2021-12-24 09:47:58][Info] Managed tables that will be used as an input <span class="k">in </span>this run, but will not be updated:
<span class="o">[]</span>

<span class="o">[</span>2021-12-24 09:47:58][Info] Managed tables that will be updated <span class="k">in </span>this run:
- client_countries

<span class="o">[</span>2021-12-24 09:47:58][Info] Estimated runtime: 0s
<span class="o">[</span>2021-12-24 09:47:58][Info] Running table hooks <span class="o">(</span>Pre<span class="o">)</span>
<span class="o">[</span>2021-12-24 09:47:58][Info] Executing table<span class="s1">'s action
[2021-12-24 09:47:58][Info] Table'</span>s action complete.
<span class="o">[</span>2021-12-24 09:47:58][Info] Running table hooks <span class="o">(</span>Post<span class="o">)</span>
<span class="o">[</span>2021-12-24 09:47:58][Info] Table<span class="s1">' processing complete.
[2021-12-24 09:47:58][Info] TableSpec "client_countries" server stats: 0 rows affected
[2021-12-24 09:47:58][Info] Execution completed. Please see below for a summary.
[2021-12-24 09:47:58][Info] ----------------------------------------------------------
[2021-12-24 09:47:58][Info] Table "client_countries" ran in 0.01: 0 rows affected
[2021-12-24 09:47:58][Info] Run complete. Total cost: 0 rows affected
</span></code></pre></div></div> <p>To verify the result of our first Napkin run, we examine the state of our SQLite database:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sqlite3 ./.chinook-sql.db
SQLite version 3.31.1 2020-01-27 19:55:54
Enter <span class="s2">".help"</span> <span class="k">for </span>usage hints.
sqlite&gt; .tables
Album             Employee          InvoiceLine       PlaylistTrack
Artist            Genre             MediaType         Track
Customer          Invoice           Playlist          client_countries
sqlite&gt; <span class="k">select</span> <span class="k">*</span> from client_countries<span class="p">;</span>
USA|91
Canada|56
Brazil|35
France|35
Germany|28
United Kingdom|21
Czech Republic|14
Portugal|14
India|13
Argentina|7
Australia|7
Austria|7
Belgium|7
Chile|7
Denmark|7
Finland|7
Hungary|7
Ireland|7
Italy|7
Netherlands|7
Norway|7
Poland|7
Spain|7
Sweden|6
</code></pre></div></div> <h5 id="assertions"> <a href="#assertions" class="anchor-heading" aria-labelledby="assertions"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Assertions </h5> <p>Next we use the <code class="language-plaintext highlighter-rouge">post-hook</code> capablity of Napkin add some <a href="https://en.wikipedia.org/wiki/Test_assertion" target="_blank" rel="noopener noreferrer">test assertion</a></p>
<pre><code class="language-YAML"># yaml-language-server: $schema=http://soostone-napkin-public.s3-website.us-east-1.amazonaws.com/schema/schema.json

# Connect to Sqlite database:
backend: Sqlite
db_url: sqlite:.chinook-sql.db

tables:

## countries have the most Invoices
  client_countries:
    create_action:
      sql_file:
        source: client_countries.sql
    post_hooks:
      - assert_unique:
          table: client_countries
          columns: 
          - billingCountry
</code></pre>
<h4 id="top-10-client_countries"> <a href="#top-10-client_countries" class="anchor-heading" aria-labelledby="top-10-client_countries"><svg viewbox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Top 10 client_countries </h4> <p>TBD</p>
<pre><code class="language-SQL">SELECT
    *
FROM
    
ORDER BY
     FETCH FIRST  ROWS ONLY
</code></pre>
<pre><code class="language-YAML"># yaml-language-server: $schema=http://soostone-napkin-public.s3-website.us-east-1.amazonaws.com/schema/schema.json

# Connect to Sqlite database:
backend: Sqlite
db_url: sqlite:.chinook-sql.db

tables:

## countries have the most Invoices
  client_countries:
    create_action:
      sql_file:
        source: client_countries.sql
    post_hooks:
      - assert_unique:
          table: client_countries
          columns: 
          - billingCountry

## top 10 countries have the most Invoices
  top10_client_countries:
    create_action:
      sql_file:
        source: top_performers.sql
        vars:
          table: client_countries
          max_limit: 10
          top_by: Invoices

## breakdown countries by genres
</code></pre>
</div> </div> <div class="main-content-rspander"></div> <div class="search-overlay"></div> </div> <footer class="site-footer"> <div class="site-footer-rows"> <div class="site-footer-r1"> <div class="white-napkin"></div> <div class="sf-box"> <div class="sfb-nav"> <div class="link-table"> <a href="#" class="">Documentation</a> <a href="#" class="">Community</a> <a href="#" class="">Features</a> </div> <div class="link-table"> <a href="#" class="">Use Cases</a> <a href="#" class="">About Napkin</a> <a href="#" class="">Contact</a> </div> </div> <div class="gradient-border"> <a href="#" class="link-button">Get Napkin</a> </div> </div> </div> <div class="media-bar"> <span class="media-pad"> <a href="#" class="logo fb-logo"></a> </span> <span class="media-pad"> <a href="#" class="logo twitter-logo"></a> </span> <span class="media-pad"> <a href="#" class="logo linked-in-logo"></a> </span> </div> <div class="site-footer-copy-right"> <div class="copyright"> Copyright 2021 ©    |    <a href="#">Privacy Policy</a> </div> <div class="made-with"> Made with <span class="heart-inline"> </span> in NYC </div> </div> </div> </footer> <div class="sortcat-shadow"> </div> <script type="text/javascript" src="/assets/js/copy.js"></script> <script type="text/javascript" src="/assets/js/highlight-active-link.js"></script> </body> </html>
