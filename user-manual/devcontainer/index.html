<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Devcontainer</title> <meta name="generator" content="Jekyll v4.2.1" /> <meta property="og:title" content="Devcontainer" /> <meta name="author" content="Kamil Figiela" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Napkin tutorials for data scientists and analytics using BigQuery, Postgres, Sqlite and other NoSql/SQL systems." /> <meta property="og:description" content="Napkin tutorials for data scientists and analytics using BigQuery, Postgres, Sqlite and other NoSql/SQL systems." /> <link rel="canonical" href="https://docs.napkin.run/user-manual/devcontainer/" /> <meta property="og:url" content="https://docs.napkin.run/user-manual/devcontainer/" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Devcontainer" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Kamil Figiela"},"description":"Napkin tutorials for data scientists and analytics using BigQuery, Postgres, Sqlite and other NoSql/SQL systems.","headline":"Devcontainer","url":"https://docs.napkin.run/user-manual/devcontainer/"}</script> <!-- End Jekyll SEO tag --> <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script> <script type="text/javascript" src="/assets/js/resize.js"></script> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewbox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewbox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewbox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewbox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewbox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="#" id="menu-button" class="site-button"> <svg viewbox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list">
<li class="nav-list-item"><a href="https://docs.napkin.run/" class="nav-list-link">About</a></li>
<li class="nav-list-item"><a href="https://docs.napkin.run/getting-started/" class="nav-list-link">Getting started</a></li>
<li class="nav-list-item">
<a href="#" class="nav-list-expander"><svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://docs.napkin.run/install/" class="nav-list-link">Installation</a><ul class="nav-list ">
<li class="nav-list-item "><a href="https://docs.napkin.run/install#native" class="nav-list-link">Native</a></li>
<li class="nav-list-item "><a href="https://docs.napkin.run/install#homebrew" class="nav-list-link">Homebrew</a></li>
<li class="nav-list-item "><a href="https://docs.napkin.run/install#docker" class="nav-list-link">Docker</a></li>
<li class="nav-list-item "><a href="https://docs.napkin.run/install#cachix" class="nav-list-link">Cachix</a></li>
</ul>
</li>
<li class="nav-list-item"><a href="https://docs.napkin.run/fundamentals/" class="nav-list-link">Fundamentals</a></li>
<li class="nav-list-item"><a href="https://docs.napkin.run/tips-and-tricks/" class="nav-list-link">Tips and Tricks</a></li>
<li class="nav-list-item active">
<a href="#" class="nav-list-expander"><svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://docs.napkin.run/user-manual/" class="nav-list-link">User Manual</a><ul class="nav-list ">
<li class="nav-list-item "><a href="https://docs.napkin.run/user-manual/cli-reference/" class="nav-list-link">CLI reference</a></li>
<li class="nav-list-item "><a href="https://docs.napkin.run/user-manual/db-connection/" class="nav-list-link">Connecting to the database</a></li>
<li class="nav-list-item active"><a href="https://docs.napkin.run/user-manual/devcontainer/" class="nav-list-link active">Devcontainer</a></li>
<li class="nav-list-item "><a href="https://docs.napkin.run/user-manual/docker/" class="nav-list-link">Docker</a></li>
<li class="nav-list-item "><a href="https://docs.napkin.run/user-manual/ide/" class="nav-list-link">IDE Support</a></li>
<li class="nav-list-item "><a href="https://docs.napkin.run/user-manual/multi-environment/" class="nav-list-link">Multi-environment pipelines in a team setting</a></li>
<li class="nav-list-item "><a href="https://docs.napkin.run/user-manual/mustache/" class="nav-list-link">Mustache Interpolation</a></li>
<li class="nav-list-item "><a href="https://docs.napkin.run/user-manual/preprocessors/" class="nav-list-link">Preprocessors</a></li>
<li class="nav-list-item "><a href="https://docs.napkin.run/user-manual/github-actions/" class="nav-list-link">Running as a scheduled job on GitHub Actions</a></li>
<li class="nav-list-item "><a href="https://docs.napkin.run/user-manual/yaml-reference/" class="nav-list-link">Spec YAML reference</a></li>
<li class="nav-list-item "><a href="https://docs.napkin.run/user-manual/spec-arguments/" class="nav-list-link">Spec arguments</a></li>
</ul>
</li>
<li class="nav-list-item">
<a href="#" class="nav-list-expander"><svg viewbox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://docs.napkin.run/metaprogramming/" class="nav-list-link">Metaprogramming</a><ul class="nav-list ">
<li class="nav-list-item "><a href="https://docs.napkin.run/metaprogramming/haskell/" class="nav-list-link">Haskell API</a></li>
<li class="nav-list-item "><a href="https://docs.napkin.run/metaprogramming/repl/" class="nav-list-link">REPL</a></li>
<li class="nav-list-item "><a href="https://docs.napkin.run/metaprogramming/custom-hooks/" class="nav-list-link">Writing Custom Hooks</a></li>
</ul>
</li>
<li class="nav-list-item"><a href="https://docs.napkin.run/haddock/" class="nav-list-link">API Reference</a></li>
<li class="nav-list-item"><a href="https://docs.napkin.run/changelog/" class="nav-list-link">Changelog</a></li>
</ul> </nav> </div> <div class="site-super-header"> <div class="super-nav-box"> <div class="site-logo"></div> <div class="site-buttons"> <a class="link-button active" href="/">Documentation</a> <a class="link-button" href="https://napkinweb.webflow.io/community" target="_blank" rel="noopener noreferrer">Community</a> <a class="link-button" href="https://napkinweb.webflow.io/features" target="_blank" rel="noopener noreferrer">Features</a> <a class="link-button" href="https://napkinweb.webflow.io/usecases" target="_blank" rel="noopener noreferrer">Use Cases</a> <span class="gradient-border"> <a class="link-button" href="/install/">Install</a> </span> </div> </div> </div> <div class="width-ruler"></div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search " aria-label="Search " autocomplete="off"> <label for="search-input" class="search-label"><svg viewbox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="https://docs.napkin.run/user-manual/">User Manual</a></li> <li class="breadcrumb-nav-list-item"><span>Devcontainer</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="devcontainer">Devcontainer</h1> <p><a href="https://code.visualstudio.com/docs/remote/containers" target="_blank" rel="noopener noreferrer">Devcontainer</a> is a Visual Studio Code feature that enables to do development in Docker containers. Since IDE has native support for Docker-based development environments the usual drawbacks of such environments have been eliminated. The IDE will launch the necessary docker image that contains a comprehensive development environment, as well as will mount all the necessary volumes. Since the devcontainer configuration can be checked into the Git repo, it can be easily maintained in a team environment. The Docker host can be either the local machine (including Docker Desktop on macOS) or remote docker host (e.g. powerful cloud VM, or a server running in a private network).</p> <h2 id="using-devcontainer-enabled-projects">Using devcontainer enabled projects</h2> <p>The Napkin Docker image uses <a href="https://github.com/microsoft/vscode-dev-containers/tree/main/containers/ubuntu" target="_blank" rel="noopener noreferrer">VSCode devcontainer</a> as a base. It is based on Ubuntu Hirsute and includes Napkin, Git, and other common utilities. If other tools are necessary, one can further extend by adding extra layers with Dockerfile as described in this document.</p> <p>First, clone your Git repo as usual. Next, select “Reopen folder in container” when prompted. IDE will reload and open your project in a Docker-based environment with Napkin and other development tools available.</p> <h2 id="configuring-the-devcontainer-in-a-new-project">Configuring the devcontainer in a new project</h2> <p>If you have used <code class="language-plaintext highlighter-rouge">napkin init</code> to create your project all necessary files have already been created for you.</p> <h3 id="minimal-setup">Minimal setup</h3> <p>Add <code class="language-plaintext highlighter-rouge">.devcontainer.json</code> file to the project root, then select “Reopen folder in Container”.</p> <p class="text-delta text-center">.devcontainer.json</p> <div class="language-json copyable highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Napkin Project"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"soostone/napkin-exe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"yaml.schemas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"/usr/share/napkin/spec-schema.json"</span><span class="p">:</span><span class="w"> </span><span class="s2">"spec*.yaml"</span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"extensions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"haskell.haskell"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"redhat.vscode-yaml"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"eamodio.gitlens"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ms-azuretools.vscode-docker"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shinichi-takii.sql-bigquery"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ms-ossdata.vscode-postgresql"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"forwardPorts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">9901</span><span class="p">],</span><span class="w"> </span><span class="err">//</span><span class="w"> </span><span class="err">optional</span><span class="p">,</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">rely</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">auto</span><span class="w"> </span><span class="err">forward</span><span class="p">,</span><span class="w"> </span><span class="err">needed</span><span class="w"> </span><span class="err">only</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">BigQuery</span><span class="w">
  </span><span class="nl">"remoteUser"</span><span class="p">:</span><span class="w"> </span><span class="s2">"napkin"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h3 id="advanced-setup-with-extra-development-tools">Advanced setup with extra development tools</h3> <p>Should extra development tools be necessary, you can extend your development environment by extending the Napkin image with extra layers. Remember to select “Rebuild container” whenever you update <code class="language-plaintext highlighter-rouge">.devcontainer.json</code> or <code class="language-plaintext highlighter-rouge">Dockerfile</code>. Please refer to <a href="https://code.visualstudio.com/docs/remote/containers#_create-a-devcontainerjson-file" target="_blank" rel="noopener noreferrer">the manual</a> for more information.</p> <p class="text-delta text-center">.devcontainer.json</p> <div class="language-json copyable highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Napkin Project"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"dockerfile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dockerfile"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"../"</span><span class="p">,</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">Update</span><span class="w"> </span><span class="err">'NAPKIN_DOCKER_TAG'</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">upgrade</span><span class="w"> </span><span class="err">napkin</span><span class="w">
    </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"NAPKIN_DOCKER_TAG"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1.2.3"</span><span class="w"> </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">

  </span><span class="err">//</span><span class="w"> </span><span class="err">Set</span><span class="w"> </span><span class="err">*default*</span><span class="w"> </span><span class="err">container</span><span class="w"> </span><span class="err">specific</span><span class="w"> </span><span class="err">settings.json</span><span class="w"> </span><span class="err">values</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">container</span><span class="w"> </span><span class="err">create.</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"yaml.schemas"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nl">"/usr/share/napkin/spec-schema.json"</span><span class="p">:</span><span class="w"> </span><span class="s2">"spec*.yaml"</span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">

  </span><span class="err">//</span><span class="w"> </span><span class="err">Add</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">IDs</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">extensions</span><span class="w"> </span><span class="err">you</span><span class="w"> </span><span class="err">want</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">installed</span><span class="w"> </span><span class="err">when</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">container</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">created.</span><span class="w">
  </span><span class="nl">"extensions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"haskell.haskell"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"redhat.vscode-yaml"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"eamodio.gitlens"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ms-azuretools.vscode-docker"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shinichi-takii.sql-bigquery"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ms-ossdata.vscode-postgresql"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="err">Use</span><span class="w"> </span><span class="err">'forwardPorts'</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">make</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">list</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">ports</span><span class="w"> </span><span class="err">inside</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">container</span><span class="w"> </span><span class="err">available</span><span class="w"> </span><span class="err">locally.</span><span class="w">
  </span><span class="nl">"forwardPorts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">9901</span><span class="p">],</span><span class="w">

  </span><span class="err">//</span><span class="w"> </span><span class="err">Use</span><span class="w"> </span><span class="err">'postCreateCommand'</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">run</span><span class="w"> </span><span class="err">commands</span><span class="w"> </span><span class="err">after</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">container</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">created.</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="nl">"postCreateCommand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uname -a"</span><span class="p">,</span><span class="w">

  </span><span class="err">//</span><span class="w"> </span><span class="err">Comment</span><span class="w"> </span><span class="err">out</span><span class="w"> </span><span class="err">connect</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">root</span><span class="w"> </span><span class="err">instead.</span><span class="w"> </span><span class="err">More</span><span class="w"> </span><span class="err">info:</span><span class="w"> </span><span class="err">https://aka.ms/vscode-remote/containers/non-root.</span><span class="w">
  </span><span class="nl">"remoteUser"</span><span class="p">:</span><span class="w"> </span><span class="s2">"vscode"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p class="text-delta text-center">Dockerfile</p> <div class="language-docker copyable highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ARG</span><span class="s"> NAPKIN_DOCKER_TAG</span>
<span class="k">FROM</span><span class="s"> soostone/napkin-exe:$NAPKIN_DOCKER_TAG</span>

<span class="c">## You can extend your development environment by installing extra packages from ubuntu</span>
<span class="c"># RUN apt-get update &amp;&amp; apt-get install -y extra-package</span>
<span class="c">## Or from nixos</span>
<span class="c"># RUN nix-env -f "&lt;nixpkgs&gt;" -iA extra-package</span>
</code></pre></div></div> </div> </div> <div class="search-overlay"></div> </div> <div class="site-super-footer"> <div class="super-nav-box"> <div class="site-logo"></div> <div class="site-buttons"> <div class="table-wrapper"><table> <tr> <td> <a class="link-button active" href="/">Documentation</a> </td> <td> <a class="link-button" href="https://napkinweb.webflow.io/usecases" target="_blank" rel="noopener noreferrer">Use Cases</a> </td> <td> <span class="gradient-border"> <a class="link-button" href="/install/">Get Napkin</a> </span> </td> </tr> <tr> <td> <a class="link-button" href="https://napkinweb.webflow.io/community" target="_blank" rel="noopener noreferrer">Community</a> </td> <td> <a class="link-button" href="https://napkinweb.webflow.io/about" target="_blank" rel="noopener noreferrer">About Napkin</a> </td> </tr> <tr> <td> <a class="link-button" href="https://napkinweb.webflow.io/features" target="_blank" rel="noopener noreferrer">Features</a> </td> <td> <a class="link-button" href="https://napkinweb.webflow.io/contact" target="_blank" rel="noopener noreferrer">Contact</a> </td> </tr> </table></div> </div> <div class="media-bar"> <div class="media-pad"><a href="#" class="inline-icon facebook"></a></div> <div class="media-pad"><a href="#" class="inline-icon twitter"></a></div> <div class="media-pad"><a href="#" class="inline-icon linked-in"></a></div> </div> <div class="copyright"> <div class="left"> Copyright 2022 © </div> <div class="right"> Made with <span class="heart"> </span> in NYC </div> </div> </div> </div> <script type="text/javascript" src="/assets/js/copy.js"></script> </body> </html>
